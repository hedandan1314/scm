<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>待审核销售单</title>
		<link rel="stylesheet" type="text/css" href="../../libs/layui/css/layui.css" />
		<style type="text/css">
			.layui-layer-border {
				min-width: 100px!important;
				background-color: rgba(0, 0, 0, .6)!important;
				color: #fff!important;
				border: none!important;
			}
			
			.layui-layer-btn .layui-layer-btn0 {
				background-color: #009688!important;
				border-color: #009688!important;
				color: #fff;
			}
		</style>
	</head>

	<body>
		<!--查看具体商品-->
		<div id="addContent" style="display: none; padding: 20px;height: 450px;" class="layui-form">
			<div class="layui-form-item">
				<label class="layui-form-label">单号</label>
				<div class="layui-input-inline">
					<input type="text" name="nichen" autocomplete="off" class="layui-input" value="YS18121810001" readonly="">
				</div>
				<label class="layui-form-label">客户名称</label>
				<div class="layui-input-inline">
					<select name="kehu" lay-verify="required" lay-search="" id='ghName'>
						<option value="">请选择</option>
						<option value="1">客户甲</option>
						<option value="2">客户乙</option>
						<option value="3">客户丙</option>
						<option value="4">客户丁</option>
					</select>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">出货日期</label>
				<div class="layui-input-inline">
					<input type="text" class="layui-input" id="test6" placeholder=" - ">
				</div>				
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label"></label>
				<a class="layui-btn layui-btn-primary " id='add1'>
					<i class="layui-icon layui-icon-add-1"></i> 商品添加
				</a>
				<a class="layui-btn layui-btn-primary " id='add2'>
					<i class="layui-icon layui-icon-add-circle"></i> 单据导入
				</a>
				
			</div>
			<div class="layui-form-item">
				<div class="layui-form">
					<div class="layui-table-box">
						<table class="layui-hide" id="test2" lay-filter="test">

						</table>
						<!--操作-->
						<script type="text/html" id="barDemo2">
							<!--<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>-->
							<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit">
								<i class="layui-icon layui-icon-edit"></i> 编辑
							</a>
							
							<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">
								<i class="layui-icon layui-icon-delete"></i> 删除
							</a>
						</script>
					</div>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label"></label>
				<div class="layui-input-inline" style="float: right;width: 70px;">
					<input type="button" lay-submit="" lay-filter="layuiadmin-app-form-submit" value="保存" class="layui-btn" id='subBtn'>
				</div>
			</div>

		</div>
		<div class="layui-card">
			<div class="layui-card-header">
				<span class="layui-breadcrumb">
  <a href="../Homepage/control.html">主页</a>
   <a><cite>出库管理</cite></a>
    <a><cite>商品销售</cite></a>
  <a><cite>待审核销售单</cite></a>
</span></div>

		</div>
		<!--主体内容-->
		<div style="padding: 15px;    margin-top: -15px;">
			<div class="layui-card">
				<!--模糊查询-->
				<div class="layui-card-header layui-form" style="    padding-top: 15px;
    padding-bottom: 15px;">
					<div class="layui-form-item">
						<div class="layui-inline demoTable">
							<label class="layui-form-label">单据号</label>
							<div class="layui-input-inline">
								<input type="text" name="name" placeholder="请输入" autocomplete="off" class="layui-input" id="demoReload">
							</div>
						</div>
						<div class="layui-inline">
							<label class="layui-form-label">客户名称</label>
							<div class="layui-input-inline">
								<select name="kehu" lay-verify="required" lay-search="" id='kehuName'>
									<option value="">请选择</option>
									<option value="1">类别一</option>
									<option value="2">类别二</option>
									<option value="3">类别三</option>
									<option value="4">类别四</option>
								</select>
							</div>
						</div>

						<div class="layui-inline">
							<button class="layui-btn layuiadmin-btn-list" data-type="reload">
								<i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
							</button>
						</div>

						<div class="layui-inline" style="    color: #009688;
    line-height: 21px;
    width: 574px;
    float: right;">						
							说明：
							"待审核"的销售单不会使库存减少，不影响账务，且允许修改。<br>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"已审核"的单据会影响账务，且不允许修改。
						

						</div>
					</div>
				</div>
				<!--表格-->
				<div class="layui-card-body">
					<!--<div style="padding-bottom: 10px;">
						<button class="layui-btn">
  								<i class="layui-icon">&#xe608;</i> 添加
						</button>
					</div>-->
					<div class="layui-form">
						<!--表格部分-->
						<div class="layui-table-box">
							<table class="layui-hide" id="test" lay-filter="test">

							</table>
							<!--表格头部工具栏-->
							<script type="text/html" id="toolbarDemo">
								<div class="layui-btn-container">
									<button class="layui-btn layui-btn-sm" lay-event="getCheckLength">获取选中数目</button>
									<button class="layui-btn layui-btn-sm" lay-event="">审核全部</button>
									<!--<button class="layui-btn layui-btn-sm" lay-event="">添加</button>-->
								</div>
							</script>
							<!--操作-->
							<script type="text/html" id="barDemo">
								<a class="layui-btn  layui-btn-xs" lay-event="detail">
									<i class="layui-icon layui-icon-search"></i> 查看
								</a>
								<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="degree">
									<i class="layui-icon layui-icon-ok"></i> 审核
								</a>
								<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">
									<i class="layui-icon layui-icon-delete"></i> 删除
								</a>
							</script>
						</div>

					</div>
				</div>
			</div>
		</div>
		<script src="../../libs/jquery/jquery-1.10.2.js"></script>
		<script src="../../libs/layui/layui.js"></script>
		<script>
			//JavaScript代码区域
			layui.use(['element', 'table', 'laydate', 'layer'], function() {
				var element = layui.element,
					table = layui.table,
					laydate = layui.laydate,
					layer = layui.layer;
				//添加弹窗
				layer.config({
					extend: 'myskin/style.css', //加载您的扩展样式
					skin: 'layer-ext-yourskin'
				});
				//日期范围

					laydate.render({
					elem: '#test6',
					range: true
				});
				table.render({
					elem: '#test',
					//					url: '/test/table/demo3.json' //写后台接口交互使用
					//						,
					toolbar: true, //显示工具行
					title: '用户数据表',
					totalRow: true, //显示合计行
					page: true, //开启分页
					limits: [10, 15, 20, 25, 30],
					toolbar: '#toolbarDemo',
					cols: [
						[{
								type: 'checkbox',
								fixed: 'left'
							},
							{
								field: 'id',
								title: '单据号',
								width: '10%',
								fixed: 'left',
								unresize: true,
								sort: true,
								totalRowText: '合计',
								align: 'center'
							}, {
								field: 'username',
								title: '开单日期',
								width: '15%',
								edit: 'text',
								align: 'center'
							}, {
								field: 'experience',
								title: '应收金额',
								width: '10%',
								sort: true,
								totalRow: true,
								align: 'center'
							}, {
								field: 'logins',
								title: '实收金额',
								width: '10%',
								sort: true,
								edit: 'text',
								totalRow: true,
								align: 'center'
							}, {
								field: 'logins',
								title: '未付金额',
								width: '10%',
								sort: true,
								edit: 'text',
								totalRow: true,
								align: 'center'
							}, {
								field: 'city',
								title: '客户名称',
								width: '15%',
								align: 'center'
							}, {
								field: 'city',
								title: '操作员',
								width: '15%',
								align: 'center'
							}, {
								field: 'ip',
								title: '备注',
								width: '15%',
								align: 'center'
							}, {
								fixed: 'right',
								title: '操作',
								toolbar: '#barDemo',
								width: '15%',
								align: 'center'
							}
						]
					],
					data: [{
							"id": "10001",
							"username": "杜甫",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "116",
							"ip": "192.168.0.8",
							"logins": "108",
							"joinTime": "2016-10-14"
						}, {
							"id": "10002",
							"username": "李白",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "12",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14",

						}, {
							"id": "10003",
							"username": "王勃",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "65",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						}, {
							"id": "10004",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "666",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						}, {
							"id": "10005",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "86",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						}, {
							"id": "10006",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "12",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						}, {
							"id": "10007",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "16",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						}, {
							"id": "10008",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "106",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						},
						{
							"id": "10008",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "106",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						},
						{
							"id": "10008",
							"username": "贤心",
							"email": "xianxin@layui.com",
							"sex": "男",
							"city": "浙江杭州",
							"sign": "人生恰似一场修行",
							"experience": "106",
							"ip": "192.168.0.8",
							"logins": "106",
							"joinTime": "2016-10-14"
						}
					],
					//
					//					response: {
					//						statusCode: 200 //重新规定成功的状态码为 200，table 组件默认为 0
					//					},
					//					parseData: function(res) { //将原始数据解析成 table 组件所规定的数据
					//						return {
					//							"code": res.status, //解析接口状态
					//							"msg": res.message, //解析提示文本
					//							"count": res.total, //解析数据长度
					//							"data": res.rows.item //解析数据列表
					//						};
					//					}
				});
				//表格头工具栏事件
				table.on('toolbar(test)', function(obj) {
					var checkStatus = table.checkStatus(obj.config.id);

					switch(obj.event) {
						case 'getCheckLength':
							var data = checkStatus.data;
							layer.msg('选中了：' + data.length + ' 个');
							break;
					};
				});
				//监听行工具事件
				table.on('tool(test)', function(obj) {
					var data = obj.data;
					//console.log(obj)
					if(obj.event === 'del') {
						layer.confirm('确定删除此条采购单吗？', function(index) {
							obj.del();
							layer.close(index);
						});
					} else if(obj.event === 'detail') {
						var index4=layer.open({
							type: 1,
							title: ['查看商品', 'font-size:14px;'],
							area: ['800px', '550px'], //宽高
							offset: ['120.5px', '197px'],
							shadeClose: true,
							shade: 0.3,
							content: $('#addContent'),
						}, function(value, index) {
							obj.update({
								nichen: value
							});
							layer.close(index);
						});
						table.render({
							elem: '#test2',
							//					url: '/test/table/demo3.json' //写后台接口交互使用								
							totalRow: true, //显示合计行													
							cols: [
								[{
										type: 'numbers',
										fixed: 'left'
									},
									{
										field: '1',
										title: '商品编号',
										width: '15%',
										unresize: true,
										totalRowText: '合计',
										align: 'center'
									}, {
										field: '2',
										title: '商品名称',
										width: '15%',
										align: 'center'
									}, {
										field: '3',
										title: '单位',
										width: '10%',
										align: 'center'
									}, {
										field: '4',
										title: '规格型号',
										width: '15%',
										align: 'center'
									}, {
										field: '5',
										title: '单价',
										width: '10%',
										align: 'center'
									}, {
										field: '6',
										title: '数量',
										width: '10%',
										totalRow: true,
										align: 'center'
									}, {
										field: '7',
										title: '总金额',
										totalRow: true,
										width: '10%',
										align: 'center'
									}, {
										field: '8',
										title: '备注',
										width: '15%',
										align: 'center'
									}, {
										field: '9',
										fixed: 'right',
										title: '操作',
										toolbar: '#barDemo2',
										width: '25%',
										align: 'center'
									}
								]
							],
							data: [{
								"1": "20181224",
								"2": "来了老弟",
								"3": "人",
								"4": "男",
								"5": "55",
								"6": "55",
								"7": "55",
								"8": "55",

							}],
						});
												$("#subBtn").on('click',function(){
						if($('#ghName').val()!=''){
							
//							layer.confirm('单据保存后处于"未审核"状态，是否确认保存？处于"未审核"状态的采购单，可以在"待审核采购单"面板中，进行修改及审核操作！', 
//							{title: '信息提醒',
//							btn: ['是','否'],
//							yes:function(index) {
//							layer.close(index);
							layer.close(index4);
//						}
//						},
//						);
						}		
					})
					} else if(obj.event === 'degree') {
						layer.msg('审核通过', {
							time: 1000
						}, function() {
							obj.del();
						});
					}
				});
			});
		</script>
	</body>

</html>